<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kalino Shop â€” Ù†Ø³Ø®Ù‡ Ø¬Ø§Ù…Ø¹</title>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --white: #ffffff;
      --muted: #f4f6f8;
      --surface: #f1f3f5;
      --text: #111214;
      --sub: #69707a;
      --accent: #ff5a5f;
      --green: #41b883;
      --shadow: 0 6px 18px rgba(16,24,40,0.06);
      --dark-bg: #333;
      --dark-card: #555;
      --dark-text: #fff;
      --dark-muted: #444;
      --dark-surface: #666;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Vazirmatn', sans-serif;
      background: var(--white);
      color: var(--text);
      direction: rtl;
      padding-bottom: 88px;
    }
    .dark-mode { background: var(--dark-bg); color: var(--dark-text); }
    .dark-mode header, .dark-mode .bottom-nav, .dark-mode .cart-footer { background: var(--dark-muted); border-color: #555; }
    .dark-mode .cat-card, .dark-mode .prod-card, .dark-mode .cart-item, .dark-mode .account-card { background: var(--dark-card); }
    .dark-mode .search { background: linear-gradient(135deg, rgba(68,68,68,0.9), rgba(85,85,85,0.7)); }
    header {
      position: sticky;
      top: 0;
      z-index: 40;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px 16px;
      background: linear-gradient(180deg, #fff, #fbfdff 60%);
      border-bottom: 1px solid #eef1f4;
      backdrop-filter: blur(6px);
    }
    header .left {
      position: absolute;
      left: 12px;
      top: 8px;
      display: flex;
      gap: 8px;
      align-items: center;
    }
    header .right {
      position: absolute;
      right: 12px;
      top: 8px;
      display: flex;
      gap: 8px;
      align-items: center;
    }
    .brand { font-weight: 700; font-size: 18px; }
    .icon-btn {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      background: var(--muted);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: 1px solid #e8edf1;
      transition: transform .12s ease;
    }
    .icon-btn:active { transform: scale(.98); }
    .address-btn {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 6px 10px;
      border-radius: 8px;
      background: var(--muted);
      border: 1px solid #e8edf1;
      cursor: pointer;
      font-size: 14px;
      transition: transform .12s ease;
    }
    .address-btn:active { transform: scale(.98); }
    .address-btn.bold { font-weight: 700; }
    .dark-mode .address-btn { background: var(--dark-muted); border-color: #555; }
    .search-wrap { padding: 8px 16px; }
    .search {
      width: 100%;
      display: flex;
      align-items: center;
      gap: 6px;
      background: linear-gradient(135deg, rgba(255,255,255,0.9), rgba(244,246,248,0.7));
      padding: 6px 12px;
      border-radius: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      transition: all 0.3s ease;
    }
    .search:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
    .search input {
      flex: 1;
      border: 0;
      background: transparent;
      outline: none;
      font-size: 13px;
      color: var(--text);
      transition: transform 0.2s ease;
    }
    .search input:focus { transform: scale(1.02); }
    .search input::placeholder { color: var(--sub); opacity: 0.8; }
    .search-icon, .clear-icon {
      font-size: 16px;
      cursor: pointer;
      color: var(--sub);
      transition: color 0.2s ease;
    }
    .clear-icon:hover { color: var(--accent); }
    main { padding: 6px 16px 120px; }
    h2.section-title { font-size: 16px; margin-bottom: 12px; font-weight: 700; }
    .categories { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 14px; }
    .cat-card {
      background: var(--muted);
      padding: 10px;
      border-radius: 12px;
      text-align: center;
      cursor: pointer;
      transition: transform .14s ease, box-shadow .14s ease;
    }
    .cat-card:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(16,24,40,0.06); }
    .cat-card .emoji { font-size: 20px; margin-bottom: 6px; }
    .carousel {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      scroll-behavior: smooth;
      scroll-snap-type: x mandatory;
      padding-bottom: 6px;
    }
    .carousel > * { scroll-snap-align: start; }
    .carousel::-webkit-scrollbar { height: 8px; }
    .prod-card {
      min-width: 172px;
      background: var(--white);
      border-radius: 12px;
      padding: 10px;
      flex-shrink: 0;
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      gap: 8px;
      transition: transform 0.2s ease;
    }
    .prod-card.highlight { transform: scale(1.05); box-shadow: 0 4px 12px var(--accent); }
    .prod-card img { width: 100%; height: 110px; object-fit: cover; border-radius: 8px; }
    .prod-card .title { font-weight: 600; font-size: 14px; }
    .prod-card .price { color: var(--green); font-weight: 600; }
    .prod-card .actions { display: flex; gap: 8px; align-items: center; margin-top: auto; }
    .btn-primary {
      flex: 1;
      padding: 8px;
      border-radius: 10px;
      border: 0;
      background: var(--green);
      color: #fff;
      cursor: pointer;
      font-weight: 600;
    }
    .btn-outline {
      padding: 8px;
      border-radius: 10px;
      border: 1px solid #e6eaee;
      background: transparent;
      cursor: pointer;
    }
    .page { display: none; }
    .page.active { display: block; }
    .cart-list { display: flex; flex-direction: column; gap: 10px; }
    .cart-item {
      display: flex;
      gap: 12px;
      align-items: center;
      background: linear-gradient(135deg, var(--white), var(--muted));
      padding: 10px;
      border-radius: 12px;
      box-shadow: var(--shadow);
      transition: transform 0.3s ease, opacity 0.3s ease;
      transform: translateX(20px);
      opacity: 0;
    }
    .cart-item.show {
      transform: translateX(0);
      opacity: 1;
    }
    .cart-item img { width: 72px; height: 72px; border-radius: 8px; object-fit: cover; }
    .cart-item-info { flex: 1; display: flex; flex-direction: column; gap: 6px; }
    .cart-item-title { font-weight: 700; }
    .cart-item-price { color: var(--green); font-weight: 600; }
    .qty-controls { display: flex; align-items: center; gap: 8px; }
    .qty-controls button {
      width: 34px;
      height: 34px;
      border-radius: 8px;
      border: 0;
      background: var(--green);
      color: #fff;
      cursor: pointer;
      transition: background 0.2s ease;
    }
    .qty-controls button:hover { background: #2a905e; }
    .remove-btn { background: transparent; border: 0; color: var(--accent); font-size: 18px; cursor: pointer; }
    .cart-footer {
      position: fixed;
      bottom: 72px;
      left: 0;
      right: 0;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      border-radius: 12px;
      margin-top: 8px;
      background: linear-gradient(180deg, #fff, #fbfdff);
      box-shadow: 0 -2px 8px rgba(0,0,0,0.05);
      z-index: 10;
    }
    .total { font-weight: 700; font-size: 16px; }
    .items-count { font-size: 13px; color: var(--sub); }
    .checkout, .continue-shopping {
      padding: 10px 14px;
      border-radius: 12px;
      background: var(--green);
      color: #fff;
      border: 0;
      cursor: pointer;
      font-weight: 700;
    }
    .continue-shopping { background: var(--muted); color: var(--text); }
    .account-card { background: var(--muted); padding: 12px; border-radius: 12px; display: flex; flex-direction: column; gap: 10px; }
    .account-row { display: flex; justify-content: space-between; align-items: center; }
    .small-btn { padding: 8px 10px; border-radius: 10px; border: 0; background: #fff; box-shadow: 0 2px 8px rgba(0,0,0,.06); cursor: pointer; }
    .orders-list { display: flex; flex-direction: column; gap: 8px; margin-top: 8px; }
    .order-item { background: #fff; padding: 10px; border-radius: 10px; box-shadow: var(--shadow); font-size: 14px; }
    .dark-mode .order-item { background: var(--dark-card); }
    .account-card .wallet-section {
      background: linear-gradient(to right, var(--accent), var(--white));
      border-radius: 12px;
      padding: 12px;
      margin-top: 8px;
      text-align: center;
      color: var(--text);
    }
    .discount-bar {
      background: var(--accent);
      color: var(--white);
      padding: 10px 16px;
      border-radius: 12px;
      margin: 14px 0;
      position: relative;
    }
    .discount-bar .header {
      position: sticky;
      top: 0;
      background: var(--accent);
      z-index: 10;
      padding-bottom: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .discount-bar .carousel { display: flex; gap: 12px; overflow-x: auto; scroll-behavior: smooth; scroll-snap-type: x mandatory; padding-bottom: 6px; }
    .discount-bar .carousel > * { scroll-snap-align: start; }
    .dark-mode .discount-bar { background: #cc494c; }
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 100;
    }
    .modal-content {
      background: var(--white);
      padding: 20px;
      border-radius: 12px;
      text-align: right;
      min-width: 280px;
      max-width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }
    .dark-mode .modal-content { background: var(--dark-card); }
    .modal-content h3 { margin-bottom: 16px; font-size: 16px; font-weight: 700; }
    .small-btn.cancel { background: var(--muted); color: var(--text); }
    .toast {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 92px;
      background: rgba(20,20,20,.9);
      color: #fff;
      padding: 10px 14px;
      border-radius: 10px;
      font-weight: 600;
      z-index: 60;
      opacity: 0;
      pointer-events: none;
      transition: opacity .18s ease, transform .18s ease;
    }
    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(-6px);
      pointer-events: auto;
    }
    .bottom-nav {
      position: fixed;
      left: 0;
      right: 0;
      bottom: 0;
      height: 72px;
      background: var(--white);
      display: flex;
      justify-content: space-around;
      align-items: center;
      border-top: 1px solid #eef1f4;
      z-index: 50;
    }
    .bottom-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      color: var(--sub);
      cursor: pointer;
      font-size: 12px;
    }
    .bottom-btn.active { color: var(--green); font-weight: 700; }
    .loading {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      border: 4px solid var(--muted);
      border-top: 4px solid var(--green);
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { 0% { transform: translate(-50%, -50%) rotate(0deg); } 100% { transform: translate(-50%, -50%) rotate(360deg); } }
    @media (min-width: 720px) { .categories { grid-template-columns: repeat(6, 1fr); } }
    @media (max-width: 420px) { .categories { grid-template-columns: repeat(3, 1fr); } .prod-card { min-width: 150px; } }
  </style>
</head>
<body>
  <header>
    <div class="left"><div class="icon-btn" id="userBtn" title="Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ">ğŸ‘¤</div></div>
    <div class="brand">Kalino</div>
    <div class="right">
      <div class="address-btn" id="addressBtn" title="Ø§Ù†ØªØ®Ø§Ø¨ Ø¢Ø¯Ø±Ø³">
        <span id="addressLabel" style="font-size:14px">ğŸ“ Ø¢Ø¯Ø±Ø³</span>
      </div>
    </div>
  </header>

  <div class="search-wrap">
    <div class="search" role="search">
      <span class="search-icon">ğŸ”</span>
      <input id="searchInput" placeholder="Ø¬Ø³ØªØ¬Ùˆ..." aria-label="Ø¬Ø³ØªØ¬Ùˆ Ù…Ø­ØµÙˆÙ„Ø§Øª" />
      <span class="clear-icon" id="clearSearch" title="Ù¾Ø§Ú© Ú©Ø±Ø¯Ù†">Ã—</span>
    </div>
  </div>

  <main>
    <section class="page active" id="homePage">
      <h2 class="section-title">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</h2>
      <div class="categories" id="categoriesList"></div>
      <section class="discount-bar" aria-label="ØªØ®ÙÛŒÙØ§Øª Ø±ÙˆØ²Ø§Ù†Ù‡">
        <div class="header">
          <h2 class="section-title">ØªØ®ÙÛŒÙØ§Øª Ø±ÙˆØ²Ø§Ù†Ù‡</h2>
          <div id="discountTimer" style="font-size:14px;font-weight:600;color:var(--white)"></div>
        </div>
        <div class="carousel" id="discountItems"></div>
      </section>
    </section>

    <section class="page" id="categoryPage">
      <h2 class="section-title" id="categoryTitle"></h2>
      <div class="carousel" id="categoryProducts"></div>
    </section>

    <section class="page" id="cartPage">
      <h2 class="section-title">Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h2>
      <div id="cartContent">
        <div class="cart-list" id="cartItems"></div>
        <div class="cart-footer" id="cartFooter" style="display:none">
          <div>
            <div class="items-count" id="itemsCount">Û° Ø¢ÛŒØªÙ…</div>
            <div class="total" id="cartTotal">Û° ØªÙˆÙ…Ø§Ù†</div>
          </div>
          <div>
            <button class="continue-shopping" id="continueShoppingBtn">Ø§Ø¯Ø§Ù…Ù‡ Ø®Ø±ÛŒØ¯</button>
            <button class="checkout" id="checkoutBtn">Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´</button>
          </div>
        </div>
      </div>
    </section>

    <section class="page" id="accountPage">
      <div class="settings-icon icon-btn" id="settingsBtn" title="ØªÙ†Ø¸ÛŒÙ…Ø§Øª">âš™ï¸</div>
      <h2 class="section-title">Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</h2>
      <div class="account-card">
        <div style="display:flex;gap:12px;align-items:center">
          <div style="width:64px;height:64px;border-radius:12px;background:var(--muted);display:flex;align-items:center;justify-content:center;font-size:28px">ğŸ‘¤</div>
          <div style="flex:1">
            <div id="acctName" style="font-weight:700">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±</div>
            <div id="acctPhone" style="color:var(--sub);margin-top:4px">Û°Û¹Û°Û°Û°Û°Û°Û°Û°Û°</div>
          </div>
          <div style="display:flex;flex-direction:column;gap:8px">
            <button class="small-btn" id="editProfileBtn">ÙˆÛŒØ±Ø§ÛŒØ´</button>
            <button class="small-btn" id="logoutBtn">Ø®Ø±ÙˆØ¬</button>
          </div>
        </div>
        <div class="wallet-section">
          <div style="font-size:13px;color:var(--sub)">Ú©ÛŒÙ Ù¾ÙˆÙ„</div>
          <div id="walletAmount" style="font-weight:700;font-size:16px;margin:6px 0;">Û° ØªÙˆÙ…Ø§Ù†</div>
          <div style="display:flex;gap:8px;justify-content:center">
            <input id="topupValue" type="number" min="1000" placeholder="Ù…Ø¨Ù„Øº (ØªÙˆÙ…Ø§Ù†)" style="padding:8px;border-radius:10px;border:1px solid #e6eaee;background:#fff" />
            <button class="small-btn" id="topupBtn">Ø§ÙØ²Ø§ÛŒØ´</button>
          </div>
        </div>
        <div class="account-row" style="margin-top:8px">
          <button class="small-btn" id="toggleDarkMode">ØªØºÛŒÛŒØ± ØªÙ… (Ø±ÙˆØ´Ù†/ØªÛŒØ±Ù‡)</button>
        </div>
        <div style="margin-top:8px">
          <div style="font-weight:700;margin-bottom:8px">ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§</div>
          <div class="orders-list" id="ordersList">
            <div style="color:var(--sub)">Ù‡ÛŒÚ† Ø³ÙØ§Ø±Ø´ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <nav class="bottom-nav" role="navigation" aria-label="Ù†Ø§ÙˆØ¨Ø±ÛŒ Ù¾Ø§ÛŒÛŒÙ†">
    <div class="bottom-btn active" data-page="homePage">ğŸ <div>Ø®Ø§Ù†Ù‡</div></div>
    <div class="bottom-btn" data-page="cartPage">ğŸ›’<div>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ <span id="cartBadge" style="font-size:11px;margin-right:6px;color:var(--green)"></span></div></div>
    <div class="bottom-btn" data-page="accountPage">ğŸ‘¤<div>Ø­Ø³Ø§Ø¨</div></div>
  </nav>

  <div id="addressModal" class="modal" role="dialog" aria-labelledby="addressModalTitle">
    <div class="modal-content">
      <h3 id="addressModalTitle">Ø§Ù†ØªØ®Ø§Ø¨ Ø¢Ø¯Ø±Ø³</h3>
      <input type="text" id="addressInput" placeholder="Ø¢Ø¯Ø±Ø³ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ù…Ø«Ø§Ù„: ØªÙ‡Ø±Ø§Ù†ØŒ Ø®ÛŒØ§Ø¨Ø§Ù† ÙˆÙ„ÛŒØ¹ØµØ±)" style="padding:8px;border-radius:10px;border:1px solid #e6eaee;background:#fff;width:100%;margin-bottom:12px;">
      <div id="mapPlaceholder" style="height:200px;background:#f4f6f8;border-radius:10px;margin-bottom:12px;display:flex;align-items:center;justify-content:center;color:var(--sub)">Ù†Ù‚Ø´Ù‡ (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)</div>
      <div style="display:flex;gap:8px;justify-content:center">
        <button class="small-btn" id="confirmAddressBtn">ØªØ£ÛŒÛŒØ¯</button>
        <button class="small-btn cancel" id="cancelAddressBtn">Ù„ØºÙˆ</button>
      </div>
    </div>
  </div>

  <div id="topupModal" class="modal" role="dialog" aria-labelledby="topupModalTitle">
    <div class="modal-content">
      <h3 id="topupModalTitle">Ø§ÙØ²Ø§ÛŒØ´ Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©ÛŒÙ Ù¾ÙˆÙ„</h3>
      <input type="number" id="modalTopupValue" min="1000" placeholder="Ù…Ø¨Ù„Øº Ø¨Ù‡ ØªÙˆÙ…Ø§Ù†" style="padding:8px;border-radius:10px;border:1px solid #e6eaee;background:#fff;width:100%;margin-bottom:12px;">
      <div style="display:flex;gap:8px;justify-content:center">
        <button class="small-btn" id="confirmTopupBtn">ØªØ£ÛŒÛŒØ¯</button>
        <button class="small-btn cancel" id="cancelTopupBtn">Ù„ØºÙˆ</button>
      </div>
    </div>
  </div>

  <div id="orderConfirmModal" class="modal" role="dialog" aria-labelledby="orderConfirmModalTitle">
    <div class="modal-content">
      <h3 id="orderConfirmModalTitle">ØªØ£ÛŒÛŒØ¯ Ø³ÙØ§Ø±Ø´</h3>
      <div id="orderSummary" style="margin-bottom:12px;"></div>
      <div style="margin-bottom:12px;">
        <div style="font-size:13px;color:var(--sub)">Ø¢Ø¯Ø±Ø³</div>
        <div id="orderAddress" style="font-weight:700"></div>
      </div>
      <div style="margin-bottom:12px;">
        <div style="font-size:13px;color:var(--sub)">Ø±ÙˆØ´ Ø§Ø±Ø³Ø§Ù„</div>
        <select id="deliveryMethod" style="width:100%;padding:8px;border-radius:10px;border:1px solid #e6eaee;">
          <option value="standard">Ø§Ø±Ø³Ø§Ù„ Ø¹Ø§Ø¯ÛŒ (Û±-Û² Ø±ÙˆØ²)</option>
          <option value="express">Ø§Ø±Ø³Ø§Ù„ Ø³Ø±ÛŒØ¹ (Ú†Ù†Ø¯ Ø³Ø§Ø¹ØªÙ‡)</option>
        </select>
      </div>
      <div style="margin-bottom:12px;">
        <div style="font-size:13px;color:var(--sub)">Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª</div>
        <select id="paymentMethod" style="width:100%;padding:8px;border-radius:10px;border:1px solid #e6eaee;">
          <option value="wallet">Ù¾Ø±Ø¯Ø§Ø®Øª Ø§Ø² Ú©ÛŒÙ Ù¾ÙˆÙ„</option>
          <option value="cod">Ù¾Ø±Ø¯Ø§Ø®Øª Ø¯Ø±Ø¨ Ù…Ù†Ø²Ù„</option>
          <option value="online">Ù¾Ø±Ø¯Ø§Ø®Øª Ø¢Ù†Ù„Ø§ÛŒÙ†</option>
        </select>
      </div>
      <div style="display:flex;gap:8px;justify-content:center">
        <button class="small-btn" id="confirmOrderBtn">ØªØ£ÛŒÛŒØ¯ Ùˆ Ø«Ø¨Øª</button>
        <button class="small-btn cancel" id="cancelOrderBtn">Ù„ØºÙˆ</button>
      </div>
    </div>
  </div>

  <div id="onlinePaymentModal" class="modal" role="dialog" aria-labelledby="onlinePaymentModalTitle">
    <div class="modal-content">
      <h3 id="onlinePaymentModalTitle">Ù¾Ø±Ø¯Ø§Ø®Øª Ø¢Ù†Ù„Ø§ÛŒÙ†</h3>
      <p style="margin-bottom:12px;color:var(--sub)">Ù„Ø·ÙØ§Ù‹ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ (Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ)</p>
      <input type="text" id="cardNumber" placeholder="Ø´Ù…Ø§Ø±Ù‡ Ú©Ø§Ø±Øª (16 Ø±Ù‚Ù…)" style="padding:8px;border-radius:10px;border:1px solid #e6eaee;background:#fff;width:100%;margin-bottom:8px;">
      <input type="text" id="cvv2" placeholder="CVV2 (3 ÛŒØ§ 4 Ø±Ù‚Ù…)" style="padding:8px;border-radius:10px;border:1px solid #e6eaee;background:#fff;width:100%;margin-bottom:8px;">
      <input type="text" id="expiryDate" placeholder="Ø§Ù†Ù‚Ø¶Ø§ (MM/YY)" style="padding:8px;border-radius:10px;border:1px solid #e6eaee;background:#fff;width:100%;margin-bottom:12px;">
      <div style="display:flex;gap:8px;justify-content:center">
        <button class="small-btn" id="confirmOnlinePaymentBtn">Ù¾Ø±Ø¯Ø§Ø®Øª</button>
        <button class="small-btn cancel" id="cancelOnlinePaymentBtn">Ù„ØºÙˆ</button>
      </div>
      <div class="loading" id="paymentLoading"></div>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    const LS_CART = 'kalino_cart_v3';
    const LS_USER = 'kalino_user_v3';
    const LS_ORDERS = 'kalino_orders_v3';
    const LS_DARK_MODE = 'kalino_dark_mode';
    let cart = JSON.parse(localStorage.getItem(LS_CART) || '[]');
    let user = JSON.parse(localStorage.getItem(LS_USER) || '{}');
    let orders = JSON.parse(localStorage.getItem(LS_ORDERS) || '[]');
    let darkMode = JSON.parse(localStorage.getItem(LS_DARK_MODE) || 'false');
    user.address = user.address || '';
    user.language = user.language || 'fa';
    user.wallet = user.wallet || 100000; // Ù…Ù‚Ø¯Ø§Ø± Ø§ÙˆÙ„ÛŒÙ‡ Ú©ÛŒÙ Ù¾ÙˆÙ„
    saveUser();

    const categories = [
      { title: 'Ù„Ø¨Ù†ÛŒØ§Øª', items: [
        { name: 'Ø´ÛŒØ± Ú©Ù…â€ŒÚ†Ø±Ø¨', img: 'https://labaniyat.com/wp-content/uploads/2024/07/How-to-reduce-fat-in-milk-01.webp' },
        { name: 'Ø´ÛŒØ± Ù¾Ø±Ú†Ø±Ø¨', img: 'https://via.placeholder.com/400x300?text=Ø´ÛŒØ± Ù¾Ø±Ú†Ø±Ø¨' },
        { name: 'Ø´ÛŒØ± Ú©Ø§Ú©Ø§Ø¦Ùˆ', img: 'https://via.placeholder.com/400x300?text=Ø´ÛŒØ± Ú©Ø§Ú©Ø§Ø¦Ùˆ' },
        { name: 'Ù…Ø§Ø³Øª Ù…ÙˆØ³ÛŒØ±', img: 'https://via.placeholder.com/400x300?text=Ù…Ø§Ø³Øª Ù…ÙˆØ³ÛŒØ±' },
        { name: 'Ù…Ø§Ø³Øª Ø³Ø§Ø¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ù…Ø§Ø³Øª Ø³Ø§Ø¯Ù‡' },
        { name: 'Ø¯ÙˆØº', img: 'https://via.placeholder.com/400x300?text=Ø¯ÙˆØº' },
        { name: 'Ú©Ø±Ù‡ Ù¾Ø§Ø³ØªÙˆØ±ÛŒØ²Ù‡', img: 'https://via.placeholder.com/400x300?text=Ú©Ø±Ù‡ Ù¾Ø§Ø³ØªÙˆØ±ÛŒØ²Ù‡' },
        { name: 'Ø®Ø§Ù…Ù‡ ØµØ¨Ø­Ø§Ù†Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø®Ø§Ù…Ù‡ ØµØ¨Ø­Ø§Ù†Ù‡' },
        { name: 'Ù¾Ù†ÛŒØ± Ø³ÙÛŒØ¯ Ø§ÛŒØ±Ø§Ù†ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù¾Ù†ÛŒØ± Ø³ÙÛŒØ¯ Ø§ÛŒØ±Ø§Ù†ÛŒ' },
        { name: 'Ù¾Ù†ÛŒØ± Ø®Ø§Ù…Ù‡â€ŒØ§ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù¾Ù†ÛŒØ± Ø®Ø§Ù…Ù‡â€ŒØ§ÛŒ' },
        { name: 'Ù¾Ù†ÛŒØ± Ù¾ÛŒØªØ²Ø§', img: 'https://via.placeholder.com/400x300?text=Ù¾Ù†ÛŒØ± Ù¾ÛŒØªØ²Ø§' },
        { name: 'Ú©Ø´Ú©', img: 'https://via.placeholder.com/400x300?text=Ú©Ø´Ú©' },
        { name: 'Ù…Ø§Ø³Øª Ú†Ú©ÛŒØ¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ù…Ø§Ø³Øª Ú†Ú©ÛŒØ¯Ù‡' },
        { name: 'Ù…Ø§Ø³Øª Ù¾Ø±ÙˆØ¨ÛŒÙˆØªÛŒÚ©', img: 'https://via.placeholder.com/400x300?text=Ù…Ø§Ø³Øª Ù¾Ø±ÙˆØ¨ÛŒÙˆØªÛŒÚ©' },
        { name: 'Ø¯ÙˆØº Ú¯Ø§Ø²Ø¯Ø§Ø±', img: 'https://via.placeholder.com/400x300?text=Ø¯ÙˆØº Ú¯Ø§Ø²Ø¯Ø§Ø±' },
        { name: 'Ø¯ÙˆØº Ø¨Ø¯ÙˆÙ† Ú¯Ø§Ø²', img: 'https://via.placeholder.com/400x300?text=Ø¯ÙˆØº Ø¨Ø¯ÙˆÙ† Ú¯Ø§Ø²' }
      ] },
      { title: 'Ø®ÙˆØ§Ø± Ùˆ Ø¨Ø§Ø±', items: [
        { name: 'Ø¨Ø±Ù†Ø¬ Ø·Ø§Ø±Ù…', img: 'https://bagheiran.com/wp-content/uploads/2023/07/%D8%A8%D8%B1%D9%86%D8%AC-%D8%B7%D8%A7%D8%B1%D9%85-%D9%87%D8%A7%D8%B4%D9%85%DB%8C_BagheIRAN.com_.jpg' },
        { name: 'Ø¨Ø±Ù†Ø¬ Ù‡Ø§Ø´Ù…ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ø¨Ø±Ù†Ø¬ Ù‡Ø§Ø´Ù…ÛŒ' },
        { name: 'Ø¹Ø¯Ø³', img: 'https://via.placeholder.com/400x300?text=Ø¹Ø¯Ø³' },
        { name: 'Ù„ÙˆØ¨ÛŒØ§ Ú†ÛŒØªÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù„ÙˆØ¨ÛŒØ§ Ú†ÛŒØªÛŒ' },
        { name: 'Ù„ÙˆØ¨ÛŒØ§ Ù‚Ø±Ù…Ø²', img: 'https://via.placeholder.com/400x300?text=Ù„ÙˆØ¨ÛŒØ§ Ù‚Ø±Ù…Ø²' },
        { name: 'Ù†Ø®ÙˆØ¯', img: 'https://via.placeholder.com/400x300?text=Ù†Ø®ÙˆØ¯' },
        { name: 'Ù„Ù¾Ù‡', img: 'https://via.placeholder.com/400x300?text=Ù„Ù¾Ù‡' },
        { name: 'Ù…Ø§Ø´', img: 'https://via.placeholder.com/400x300?text=Ù…Ø§Ø´' },
        { name: 'Ø±Ø¨ Ú¯ÙˆØ¬Ù‡ ÙØ±Ù†Ú¯ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ø±Ø¨ Ú¯ÙˆØ¬Ù‡ ÙØ±Ù†Ú¯ÛŒ' },
        { name: 'Ø±ÙˆØºÙ† Ù…Ø§ÛŒØ¹', img: 'https://via.placeholder.com/400x300?text=Ø±ÙˆØºÙ† Ù…Ø§ÛŒØ¹' },
        { name: 'Ø±ÙˆØºÙ† Ø³Ø±Ø®â€ŒÚ©Ø±Ø¯Ù†ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ø±ÙˆØºÙ† Ø³Ø±Ø®â€ŒÚ©Ø±Ø¯Ù†ÛŒ' },
        { name: 'Ø±ÙˆØºÙ† Ø²ÛŒØªÙˆÙ†', img: 'https://via.placeholder.com/400x300?text=Ø±ÙˆØºÙ† Ø²ÛŒØªÙˆÙ†' },
        { name: 'Ù†Ù…Ú©', img: 'https://via.placeholder.com/400x300?text=Ù†Ù…Ú©' },
        { name: 'Ø´Ú©Ø±', img: 'https://via.placeholder.com/400x300?text=Ø´Ú©Ø±' },
        { name: 'Ø¢Ø±Ø¯', img: 'https://via.placeholder.com/400x300?text=Ø¢Ø±Ø¯' },
        { name: 'Ø²Ø¹ÙØ±Ø§Ù†', img: 'https://via.placeholder.com/400x300?text=Ø²Ø¹ÙØ±Ø§Ù†' },
        { name: 'Ø§Ø¯ÙˆÛŒÙ‡ Ú©Ø§Ø±ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ø§Ø¯ÙˆÛŒÙ‡ Ú©Ø§Ø±ÛŒ' },
        { name: 'ÙÙ„ÙÙ„ Ø³ÛŒØ§Ù‡', img: 'https://via.placeholder.com/400x300?text=ÙÙ„ÙÙ„ Ø³ÛŒØ§Ù‡' },
        { name: 'Ø²Ø±Ø¯Ú†ÙˆØ¨Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø²Ø±Ø¯Ú†ÙˆØ¨Ù‡' },
        { name: 'Ø³Ù…Ø§Ù‚', img: 'https://via.placeholder.com/400x300?text=Ø³Ù…Ø§Ù‚' },
        { name: 'Ø²Ø±Ø´Ú©', img: 'https://via.placeholder.com/400x300?text=Ø²Ø±Ø´Ú©' },
        { name: 'ØªØ±Ø®ÛŒÙ†Ù‡', img: 'https://via.placeholder.com/400x300?text=ØªØ±Ø®ÛŒÙ†Ù‡' },
        { name: 'Ù¾ÙˆØ¯Ø± Ø³ÙˆØ®Ø§Ø±ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù¾ÙˆØ¯Ø± Ø³ÙˆØ®Ø§Ø±ÛŒ' }
      ] },
      { title: 'Ú©Ù†Ø³Ø±Ùˆ Ùˆ ØºØ°Ø§ÛŒ Ø¢Ù…Ø§Ø¯Ù‡', items: [
        { name: 'Ú©Ù†Ø³Ø±Ùˆ Ù„ÙˆØ¨ÛŒØ§', img: 'https://cdn3.goldtag.net/web/uploads/pictures/558x405/1315560490_1700119598_1.jpg' },
        { name: 'Ú©Ù†Ø³Ø±Ùˆ Ù…Ø§Ù‡ÛŒ ØªÙ†', img: 'https://via.placeholder.com/400x300?text=Ú©Ù†Ø³Ø±Ùˆ Ù…Ø§Ù‡ÛŒ ØªÙ†' },
        { name: 'Ú©Ù†Ø³Ø±Ùˆ Ø°Ø±Øª', img: 'https://via.placeholder.com/400x300?text=Ú©Ù†Ø³Ø±Ùˆ Ø°Ø±Øª' },
        { name: 'Ú©Ù†Ø³Ø±Ùˆ Ù†Ø®ÙˆØ¯ÙØ±Ù†Ú¯ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ú©Ù†Ø³Ø±Ùˆ Ù†Ø®ÙˆØ¯ÙØ±Ù†Ú¯ÛŒ' },
        { name: 'Ú©Ù†Ø³Ø±Ùˆ Ø¨Ø§Ø¯Ù…Ø¬Ø§Ù†', img: 'https://via.placeholder.com/400x300?text=Ú©Ù†Ø³Ø±Ùˆ Ø¨Ø§Ø¯Ù…Ø¬Ø§Ù†' },
        { name: 'Ú©Ù†Ø³Ø±Ùˆ Ø¹Ø¯Ø³ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ú©Ù†Ø³Ø±Ùˆ Ø¹Ø¯Ø³ÛŒ' },
        { name: 'Ø®ÙˆØ±Ø§Ú© Ù„ÙˆØ¨ÛŒØ§ Ú†ÛŒØªÛŒ', img: 'https://via.placeholder.com/400x300?text=Ø®ÙˆØ±Ø§Ú© Ù„ÙˆØ¨ÛŒØ§ Ú†ÛŒØªÛŒ' },
        { name: 'Ø®ÙˆØ±Ø´Øª Ù‚ÛŒÙ…Ù‡ Ø¢Ù…Ø§Ø¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø®ÙˆØ±Ø´Øª Ù‚ÛŒÙ…Ù‡ Ø¢Ù…Ø§Ø¯Ù‡' },
        { name: 'Ø®ÙˆØ±Ø´Øª Ù‚ÙˆØ±Ù…Ù‡â€ŒØ³Ø¨Ø²ÛŒ Ø¢Ù…Ø§Ø¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø®ÙˆØ±Ø´Øª Ù‚ÙˆØ±Ù…Ù‡â€ŒØ³Ø¨Ø²ÛŒ Ø¢Ù…Ø§Ø¯Ù‡' },
        { name: 'Ú©Ù†Ø³Ø±Ùˆ Ù„ÙˆØ¨ÛŒØ§ Ø¨Ø§ Ù‚Ø§Ø±Ú†', img: 'https://via.placeholder.com/400x300?text=Ú©Ù†Ø³Ø±Ùˆ Ù„ÙˆØ¨ÛŒØ§ Ø¨Ø§ Ù‚Ø§Ø±Ú†' },
        { name: 'ØºØ°Ø§ÛŒ Ù†ÛŒÙ…Ù‡â€ŒØ¢Ù…Ø§Ø¯Ù‡ Ù…Ø§Ú©Ø§Ø±ÙˆÙ†ÛŒ', img: 'https://via.placeholder.com/400x300?text=ØºØ°Ø§ÛŒ Ù†ÛŒÙ…Ù‡â€ŒØ¢Ù…Ø§Ø¯Ù‡ Ù…Ø§Ú©Ø§Ø±ÙˆÙ†ÛŒ' },
        { name: 'Ù¾ÙˆØ±Ù‡ Ø³ÛŒØ¨â€ŒØ²Ù…ÛŒÙ†ÛŒ Ø¢Ù…Ø§Ø¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ù¾ÙˆØ±Ù‡ Ø³ÛŒØ¨â€ŒØ²Ù…ÛŒÙ†ÛŒ Ø¢Ù…Ø§Ø¯Ù‡' }
      ] },
      { title: 'ØªÙ†Ù‚Ù„Ø§Øª Ùˆ Ø§Ø³Ù†Ú©', items: [
        { name: 'Ú†ÛŒÙ¾Ø³ Ù†Ù…Ú©ÛŒ', img: 'https://www.takpakhsh.co/uploads/ProductsPhotos/30972457/221330_2000.jpg' },
        { name: 'Ú†ÛŒÙ¾Ø³ ÙÙ„ÙÙ„ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ú†ÛŒÙ¾Ø³ ÙÙ„ÙÙ„ÛŒ' },
        { name: 'Ù¾ÙÚ©', img: 'https://via.placeholder.com/400x300?text=Ù¾ÙÚ©' },
        { name: 'Ù¾Ø§Ù¾â€ŒÚ©ÙˆØ±Ù†', img: 'https://via.placeholder.com/400x300?text=Ù¾Ø§Ù¾â€ŒÚ©ÙˆØ±Ù†' },
        { name: 'Ø¨ÛŒØ³Ú©ÙˆÛŒØª Ø³Ø§Ù‚Ù‡ Ø·Ù„Ø§ÛŒÛŒ', img: 'https://via.placeholder.com/400x300?text=Ø¨ÛŒØ³Ú©ÙˆÛŒØª Ø³Ø§Ù‚Ù‡ Ø·Ù„Ø§ÛŒÛŒ' },
        { name: 'ÙˆÛŒÙØ± Ø´Ú©Ù„Ø§ØªÛŒ', img: 'https://via.placeholder.com/400x300?text=ÙˆÛŒÙØ± Ø´Ú©Ù„Ø§ØªÛŒ' },
        { name: 'Ø´Ú©Ù„Ø§Øª ØªØ®ØªÙ‡â€ŒØ§ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ø´Ú©Ù„Ø§Øª ØªØ®ØªÙ‡â€ŒØ§ÛŒ' },
        { name: 'Ø´Ú©Ù„Ø§Øª Ù…ØºØ²Ø¯Ø§Ø±', img: 'https://via.placeholder.com/400x300?text=Ø´Ú©Ù„Ø§Øª Ù…ØºØ²Ø¯Ø§Ø±' },
        { name: 'Ø´Ú©Ù„Ø§Øª ØªÙ„Ø®', img: 'https://via.placeholder.com/400x300?text=Ø´Ú©Ù„Ø§Øª ØªÙ„Ø®' },
        { name: 'Ø¢Ø¯Ø§Ù…Ø³', img: 'https://via.placeholder.com/400x300?text=Ø¢Ø¯Ø§Ù…Ø³' },
        { name: 'ØªØ§ÙÛŒ', img: 'https://via.placeholder.com/400x300?text=ØªØ§ÙÛŒ' },
        { name: 'Ø¢Ø¨Ù†Ø¨Ø§Øª', img: 'https://via.placeholder.com/400x300?text=Ø¢Ø¨Ù†Ø¨Ø§Øª' },
        { name: 'Ø¨Ø³ØªÙ†ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ø¨Ø³ØªÙ†ÛŒ' },
        { name: 'Ù¾Ø§Ø³ØªÛŒÙ„', img: 'https://via.placeholder.com/400x300?text=Ù¾Ø§Ø³ØªÛŒÙ„' },
        { name: 'Ø¨ÛŒØ³Ú©ÙˆÛŒØª Ú©Ø±Ù…â€ŒØ¯Ø§Ø±', img: 'https://via.placeholder.com/400x300?text=Ø¨ÛŒØ³Ú©ÙˆÛŒØª Ú©Ø±Ù…â€ŒØ¯Ø§Ø±' },
        { name: 'Ú†ÛŒÙ¾Ø³ Ø³Ø±Ú©Ù‡â€ŒØ§ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ú†ÛŒÙ¾Ø³ Ø³Ø±Ú©Ù‡â€ŒØ§ÛŒ' },
        { name: 'Ú†ÛŒÙ¾Ø³ Ø®Ù„Ø§Ù„ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ú†ÛŒÙ¾Ø³ Ø®Ù„Ø§Ù„ÛŒ' }
      ] },
      { title: 'Ù†ÙˆØ´ÛŒØ¯Ù†ÛŒâ€ŒÙ‡Ø§', items: [
        { name: 'Ù†ÙˆØ´Ø§Ø¨Ù‡ Ú©ÙˆÚ©Ø§Ú©ÙˆÙ„Ø§', img: 'https://www.jowhareh.com/images/Jowhareh/galleries/large_1b1c8adc-5740-436b-8c03-0abe2895ab2c.webp' },
        { name: 'Ù†ÙˆØ´Ø§Ø¨Ù‡ Ù¾Ù¾Ø³ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù†ÙˆØ´Ø§Ø¨Ù‡ Ù¾Ù¾Ø³ÛŒ' },
        { name: 'Ù†ÙˆØ´Ø§Ø¨Ù‡ ÙØ§Ù†ØªØ§', img: 'https://via.placeholder.com/400x300?text=Ù†ÙˆØ´Ø§Ø¨Ù‡ ÙØ§Ù†ØªØ§' },
        { name: 'Ø¢Ø¨ Ù…Ø¹Ø¯Ù†ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ø¢Ø¨ Ù…Ø¹Ø¯Ù†ÛŒ' },
        { name: 'Ø¢Ø¨ Ú¯Ø§Ø²Ø¯Ø§Ø±', img: 'https://via.placeholder.com/400x300?text=Ø¢Ø¨ Ú¯Ø§Ø²Ø¯Ø§Ø±' },
        { name: 'Ø¯Ù„Ø³ØªØ±', img: 'https://via.placeholder.com/400x300?text=Ø¯Ù„Ø³ØªØ±' },
        { name: 'Ø¯ÙˆØº', img: 'https://via.placeholder.com/400x300?text=Ø¯ÙˆØº' },
        { name: 'Ø¢Ø¨Ù…ÛŒÙˆÙ‡ Ù¾Ø±ØªÙ‚Ø§Ù„', img: 'https://via.placeholder.com/400x300?text=Ø¢Ø¨Ù…ÛŒÙˆÙ‡ Ù¾Ø±ØªÙ‚Ø§Ù„' },
        { name: 'Ø¢Ø¨Ù…ÛŒÙˆÙ‡ Ø³ÛŒØ¨', img: 'https://via.placeholder.com/400x300?text=Ø¢Ø¨Ù…ÛŒÙˆÙ‡ Ø³ÛŒØ¨' },
        { name: 'Ø¢Ø¨Ù…ÛŒÙˆÙ‡ Ø¢Ù†Ø§Ù†Ø§Ø³', img: 'https://via.placeholder.com/400x300?text=Ø¢Ø¨Ù…ÛŒÙˆÙ‡ Ø¢Ù†Ø§Ù†Ø§Ø³' },
        { name: 'Ú†Ø§ÛŒ Ú©ÛŒØ³Ù‡â€ŒØ§ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ú†Ø§ÛŒ Ú©ÛŒØ³Ù‡â€ŒØ§ÛŒ' },
        { name: 'Ú†Ø§ÛŒ Ø³ÛŒØ§Ù‡', img: 'https://via.placeholder.com/400x300?text=Ú†Ø§ÛŒ Ø³ÛŒØ§Ù‡' },
        { name: 'Ù‚Ù‡ÙˆÙ‡ ÙÙˆØ±ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù‚Ù‡ÙˆÙ‡ ÙÙˆØ±ÛŒ' },
        { name: 'Ù†Ø³Ú©Ø§ÙÙ‡', img: 'https://via.placeholder.com/400x300?text=Ù†Ø³Ú©Ø§ÙÙ‡' },
        { name: 'Ù¾ÙˆØ¯Ø± Ú©Ø§Ú©Ø§Ø¦Ùˆ', img: 'https://via.placeholder.com/400x300?text=Ù¾ÙˆØ¯Ø± Ú©Ø§Ú©Ø§Ø¦Ùˆ' },
        { name: 'Ø´Ø±Ø¨Øª Ù„ÛŒÙ…Ùˆ', img: 'https://via.placeholder.com/400x300?text=Ø´Ø±Ø¨Øª Ù„ÛŒÙ…Ùˆ' },
        { name: 'Ø´Ø±Ø¨Øª Ø¢Ù„Ø¨Ø§Ù„Ùˆ', img: 'https://via.placeholder.com/400x300?text=Ø´Ø±Ø¨Øª Ø¢Ù„Ø¨Ø§Ù„Ùˆ' }
      ] },
      { title: 'ØµØ¨Ø­Ø§Ù†Ù‡', items: [
        { name: 'Ù†Ø§Ù† ØªØ³Øª', img: 'https://via.placeholder.com/400x300?text=Ù†Ø§Ù† ØªØ³Øª' },
        { name: 'Ù†Ø§Ù† Ù„ÙˆØ§Ø´', img: 'https://via.placeholder.com/400x300?text=Ù†Ø§Ù† Ù„ÙˆØ§Ø´' },
        { name: 'Ù…Ø±Ø¨Ø§ÛŒ ØªÙˆØªâ€ŒÙØ±Ù†Ú¯ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù…Ø±Ø¨Ø§ÛŒ ØªÙˆØªâ€ŒÙØ±Ù†Ú¯ÛŒ' },
        { name: 'Ù…Ø±Ø¨Ø§ÛŒ Ù‡ÙˆÛŒØ¬', img: 'https://via.placeholder.com/400x300?text=Ù…Ø±Ø¨Ø§ÛŒ Ù‡ÙˆÛŒØ¬' },
        { name: 'Ø¹Ø³Ù„ Ø·Ø¨ÛŒØ¹ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ø¹Ø³Ù„ Ø·Ø¨ÛŒØ¹ÛŒ' },
        { name: 'Ú©Ø±Ù‡ Ø¨Ø§Ø¯Ø§Ù…â€ŒØ²Ù…ÛŒÙ†ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ú©Ø±Ù‡ Ø¨Ø§Ø¯Ø§Ù…â€ŒØ²Ù…ÛŒÙ†ÛŒ' },
        { name: 'Ú©Ø±Ù‡ Ø­ÛŒÙˆØ§Ù†ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ú©Ø±Ù‡ Ø­ÛŒÙˆØ§Ù†ÛŒ' },
        { name: 'Ø´Ú©Ù„Ø§Øª ØµØ¨Ø­Ø§Ù†Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø´Ú©Ù„Ø§Øª ØµØ¨Ø­Ø§Ù†Ù‡' },
        { name: 'Ù¾Ù†ÛŒØ± Ø®Ø§Ù…Ù‡â€ŒØ§ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù¾Ù†ÛŒØ± Ø®Ø§Ù…Ù‡â€ŒØ§ÛŒ' },
        { name: 'ØªØ®Ù…â€ŒÙ…Ø±Øº', img: 'https://via.placeholder.com/400x300?text=ØªØ®Ù…â€ŒÙ…Ø±Øº' },
        { name: 'Ú†Ø§ÛŒ ØµØ¨Ø­Ø§Ù†Ù‡', img: 'https://via.placeholder.com/400x300?text=Ú†Ø§ÛŒ ØµØ¨Ø­Ø§Ù†Ù‡' },
        { name: 'Ù‚Ù‡ÙˆÙ‡ ÙÙˆØ±ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù‚Ù‡ÙˆÙ‡ ÙÙˆØ±ÛŒ' },
        { name: 'Ø´ÛŒØ± Ú©Ø§Ú©Ø§Ø¦Ùˆ', img: 'https://via.placeholder.com/400x300?text=Ø´ÛŒØ± Ú©Ø§Ú©Ø§Ø¦Ùˆ' }
      ] },
      { title: 'Ù¾Ø±ÙˆØªØ¦ÛŒÙ†ÛŒ', items: [
        { name: 'Ø³ÙˆØ³ÛŒØ³ Ù…Ø±Øº', img: 'https://via.placeholder.com/400x300?text=Ø³ÙˆØ³ÛŒØ³ Ù…Ø±Øº' },
        { name: 'Ø³ÙˆØ³ÛŒØ³ Ú¯ÙˆØ´Øª', img: 'https://via.placeholder.com/400x300?text=Ø³ÙˆØ³ÛŒØ³ Ú¯ÙˆØ´Øª' },
        { name: 'Ú©Ø§Ù„Ø¨Ø§Ø³', img: 'https://via.placeholder.com/400x300?text=Ú©Ø§Ù„Ø¨Ø§Ø³' },
        { name: 'Ú˜Ø§Ù…Ø¨ÙˆÙ†', img: 'https://via.placeholder.com/400x300?text=Ú˜Ø§Ù…Ø¨ÙˆÙ†' },
        { name: 'Ù‡Ù…Ø¨Ø±Ú¯Ø±', img: 'https://via.placeholder.com/400x300?text=Ù‡Ù…Ø¨Ø±Ú¯Ø±' },
        { name: 'Ù…Ø±Øº ØªØ§Ø²Ù‡', img: 'https://via.placeholder.com/400x300?text=Ù…Ø±Øº ØªØ§Ø²Ù‡' },
        { name: 'Ø±Ø§Ù† Ù…Ø±Øº', img: 'https://via.placeholder.com/400x300?text=Ø±Ø§Ù† Ù…Ø±Øº' },
        { name: 'ÙÛŒÙ„Ù‡ Ù…Ø±Øº', img: 'https://via.placeholder.com/400x300?text=ÙÛŒÙ„Ù‡ Ù…Ø±Øº' },
        { name: 'Ú¯ÙˆØ´Øª Ú¯ÙˆØ³Ø§Ù„Ù‡', img: 'https://via.placeholder.com/400x300?text=Ú¯ÙˆØ´Øª Ú¯ÙˆØ³Ø§Ù„Ù‡' },
        { name: 'Ú¯ÙˆØ´Øª Ú¯ÙˆØ³ÙÙ†Ø¯', img: 'https://via.placeholder.com/400x300?text=Ú¯ÙˆØ´Øª Ú¯ÙˆØ³ÙÙ†Ø¯' },
        { name: 'Ù…Ø§Ù‡ÛŒ Ù‚Ø²Ù„â€ŒØ¢Ù„Ø§', img: 'https://via.placeholder.com/400x300?text=Ù…Ø§Ù‡ÛŒ Ù‚Ø²Ù„â€ŒØ¢Ù„Ø§' },
        { name: 'Ù…Ø§Ù‡ÛŒ ØªÙ† ØªØ§Ø²Ù‡', img: 'https://via.placeholder.com/400x300?text=Ù…Ø§Ù‡ÛŒ ØªÙ† ØªØ§Ø²Ù‡' },
        { name: 'Ù…ÛŒÚ¯Ùˆ', img: 'https://via.placeholder.com/400x300?text=Ù…ÛŒÚ¯Ùˆ' },
        { name: 'ØªØ®Ù…â€ŒÙ…Ø±Øº', img: 'https://via.placeholder.com/400x300?text=ØªØ®Ù…â€ŒÙ…Ø±Øº' },
        { name: 'Ø¬Ú¯Ø± Ù…Ø±Øº', img: 'https://via.placeholder.com/400x300?text=Ø¬Ú¯Ø± Ù…Ø±Øº' },
        { name: 'Ø¯Ù„ Ùˆ Ù‚Ù„ÙˆÙ‡', img: 'https://via.placeholder.com/400x300?text=Ø¯Ù„ Ùˆ Ù‚Ù„ÙˆÙ‡' },
        { name: 'Ù†Ø§Ú¯Øª Ù…Ø±Øº', img: 'https://via.placeholder.com/400x300?text=Ù†Ø§Ú¯Øª Ù…Ø±Øº' },
        { name: 'ÙÛŒÙ„Ù‡ Ù…Ø§Ù‡ÛŒ', img: 'https://via.placeholder.com/400x300?text=ÙÛŒÙ„Ù‡ Ù…Ø§Ù‡ÛŒ' }
      ] },
      { title: 'ØºØ°Ø§ÛŒ Ù…Ù†Ø¬Ù…Ø¯', items: [
        { name: 'Ù¾ÛŒØªØ²Ø§ Ø¢Ù…Ø§Ø¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ù¾ÛŒØªØ²Ø§ Ø¢Ù…Ø§Ø¯Ù‡' },
        { name: 'Ø³Ù…Ø¨ÙˆØ³Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø³Ù…Ø¨ÙˆØ³Ù‡' },
        { name: 'ÙÙ„Ø§ÙÙ„', img: 'https://via.placeholder.com/400x300?text=ÙÙ„Ø§ÙÙ„' },
        { name: 'Ø³ÛŒØ¨â€ŒØ²Ù…ÛŒÙ†ÛŒ Ø³Ø±Ø®â€ŒÚ©Ø±Ø¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø³ÛŒØ¨â€ŒØ²Ù…ÛŒÙ†ÛŒ Ø³Ø±Ø®â€ŒÚ©Ø±Ø¯Ù‡' },
        { name: 'Ú©ØªÙ„Øª', img: 'https://via.placeholder.com/400x300?text=Ú©ØªÙ„Øª' },
        { name: 'Ø´Ù†ÛŒØ³Ù„ Ù…Ø±Øº', img: 'https://via.placeholder.com/400x300?text=Ø´Ù†ÛŒØ³Ù„ Ù…Ø±Øº' },
        { name: 'Ù†Ø§Ú¯Øª', img: 'https://via.placeholder.com/400x300?text=Ù†Ø§Ú¯Øª' },
        { name: 'Ø³Ø¨Ø²ÛŒ Ù‚ÙˆØ±Ù…Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø³Ø¨Ø²ÛŒ Ù‚ÙˆØ±Ù…Ù‡' },
        { name: 'Ø³Ø¨Ø²ÛŒ Ú©ÙˆÚ©Ùˆ', img: 'https://via.placeholder.com/400x300?text=Ø³Ø¨Ø²ÛŒ Ú©ÙˆÚ©Ùˆ' },
        { name: 'Ø³Ø¨Ø²ÛŒ Ø¢Ø´', img: 'https://via.placeholder.com/400x300?text=Ø³Ø¨Ø²ÛŒ Ø¢Ø´' },
        { name: 'Ø³Ø¨Ø²ÛŒ Ù¾Ù„Ùˆ', img: 'https://via.placeholder.com/400x300?text=Ø³Ø¨Ø²ÛŒ Ù¾Ù„Ùˆ' }
      ] },
      { title: 'Ø¨Ù‡Ø¯Ø§Ø´ØªÛŒ Ùˆ Ø´ÙˆÛŒÙ†Ø¯Ù‡', items: [
        { name: 'Ø´Ø§Ù…Ù¾Ùˆ Ø¨Ø¯Ù†', img: 'https://via.placeholder.com/400x300?text=Ø´Ø§Ù…Ù¾Ùˆ Ø¨Ø¯Ù†' },
        { name: 'Ø´Ø§Ù…Ù¾Ùˆ Ù…Ùˆ', img: 'https://via.placeholder.com/400x300?text=Ø´Ø§Ù…Ù¾Ùˆ Ù…Ùˆ' },
        { name: 'Ù†Ø±Ù…â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ù…Ùˆ', img: 'https://via.placeholder.com/400x300?text=Ù†Ø±Ù…â€ŒÚ©Ù†Ù†Ø¯Ù‡ Ù…Ùˆ' },
        { name: 'ØµØ§Ø¨ÙˆÙ†', img: 'https://via.placeholder.com/400x300?text=ØµØ§Ø¨ÙˆÙ†' },
        { name: 'Ù…Ø§ÛŒØ¹ Ø¯Ø³ØªØ´ÙˆÛŒÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù…Ø§ÛŒØ¹ Ø¯Ø³ØªØ´ÙˆÛŒÛŒ' },
        { name: 'Ù…Ø§ÛŒØ¹ Ø¸Ø±ÙØ´ÙˆÛŒÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù…Ø§ÛŒØ¹ Ø¸Ø±ÙØ´ÙˆÛŒÛŒ' },
        { name: 'Ù¾ÙˆØ¯Ø± Ù„Ø¨Ø§Ø³Ø´ÙˆÛŒÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù¾ÙˆØ¯Ø± Ù„Ø¨Ø§Ø³Ø´ÙˆÛŒÛŒ' },
        { name: 'Ø³ÙÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø³ÙÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡' },
        { name: 'Ø¶Ø¯Ø¹ÙÙˆÙ†ÛŒâ€ŒÚ©Ù†Ù†Ø¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø¶Ø¯Ø¹ÙÙˆÙ†ÛŒâ€ŒÚ©Ù†Ù†Ø¯Ù‡' },
        { name: 'Ø¯Ø³ØªÙ…Ø§Ù„ Ú©Ø§ØºØ°ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ø¯Ø³ØªÙ…Ø§Ù„ Ú©Ø§ØºØ°ÛŒ' },
        { name: 'Ø¯Ø³ØªÙ…Ø§Ù„ ØªÙˆØ§Ù„Øª', img: 'https://via.placeholder.com/400x300?text=Ø¯Ø³ØªÙ…Ø§Ù„ ØªÙˆØ§Ù„Øª' },
        { name: 'Ù¾ÙˆØ´Ú© Ø¨Ø²Ø±Ú¯Ø³Ø§Ù„', img: 'https://via.placeholder.com/400x300?text=Ù¾ÙˆØ´Ú© Ø¨Ø²Ø±Ú¯Ø³Ø§Ù„' },
        { name: 'Ø´ÛŒØ´Ù‡ Ù¾Ø§Ú©â€ŒÚ©Ù†', img: 'https://via.placeholder.com/400x300?text=Ø´ÛŒØ´Ù‡ Ù¾Ø§Ú©â€ŒÚ©Ù†' },
        { name: 'Ø§Ø³Ù¾Ø±ÛŒ Ø®ÙˆØ´Ø¨ÙˆÚ©Ù†Ù†Ø¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø§Ø³Ù¾Ø±ÛŒ Ø®ÙˆØ´Ø¨ÙˆÚ©Ù†Ù†Ø¯Ù‡' },
        { name: 'Ø®Ù…ÛŒØ± Ø¯Ù†Ø¯Ø§Ù†', img: 'https://via.placeholder.com/400x300?text=Ø®Ù…ÛŒØ± Ø¯Ù†Ø¯Ø§Ù†' },
        { name: 'Ù…Ø³ÙˆØ§Ú©', img: 'https://via.placeholder.com/400x300?text=Ù…Ø³ÙˆØ§Ú©' },
        { name: 'Ù†Ø® Ø¯Ù†Ø¯Ø§Ù†', img: 'https://via.placeholder.com/400x300?text=Ù†Ø® Ø¯Ù†Ø¯Ø§Ù†' },
        { name: 'Ú©Ø±Ù… Ù…Ø±Ø·ÙˆØ¨â€ŒÚ©Ù†Ù†Ø¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ú©Ø±Ù… Ù…Ø±Ø·ÙˆØ¨â€ŒÚ©Ù†Ù†Ø¯Ù‡' },
        { name: 'Ù„ÙˆØ³ÛŒÙˆÙ† Ø¨Ø¯Ù†', img: 'https://via.placeholder.com/400x300?text=Ù„ÙˆØ³ÛŒÙˆÙ† Ø¨Ø¯Ù†' },
        { name: 'Ø§ÙØªØ±Ø´ÛŒÙˆ', img: 'https://via.placeholder.com/400x300?text=Ø§ÙØªØ±Ø´ÛŒÙˆ' }
      ] },
      { title: 'Ú©ÙˆØ¯Ú© Ùˆ Ù†ÙˆØ²Ø§Ø¯', items: [
        { name: 'Ù¾ÙˆØ´Ú© Ù…ÙˆÙ„ÙÛŒÚ©Ø³', img: 'https://via.placeholder.com/400x300?text=Ù¾ÙˆØ´Ú© Ù…ÙˆÙ„ÙÛŒÚ©Ø³' },
        { name: 'Ø¯Ø³ØªÙ…Ø§Ù„ Ù…Ø±Ø·ÙˆØ¨', img: 'https://via.placeholder.com/400x300?text=Ø¯Ø³ØªÙ…Ø§Ù„ Ù…Ø±Ø·ÙˆØ¨' },
        { name: 'Ø´ÛŒØ± Ø®Ø´Ú©', img: 'https://via.placeholder.com/400x300?text=Ø´ÛŒØ± Ø®Ø´Ú©' },
        { name: 'Ø´ÛŒØ´Ù‡ Ø´ÛŒØ±', img: 'https://via.placeholder.com/400x300?text=Ø´ÛŒØ´Ù‡ Ø´ÛŒØ±' },
        { name: 'Ù¾Ø³ØªØ§Ù†Ú©', img: 'https://via.placeholder.com/400x300?text=Ù¾Ø³ØªØ§Ù†Ú©' },
        { name: 'Ú©Ø±Ù… Ú©ÙˆØ¯Ú©', img: 'https://via.placeholder.com/400x300?text=Ú©Ø±Ù… Ú©ÙˆØ¯Ú©' },
        { name: 'Ø´Ø§Ù…Ù¾Ùˆ Ø¨Ú†Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø´Ø§Ù…Ù¾Ùˆ Ø¨Ú†Ù‡' },
        { name: 'Ù¾ÙˆØ¯Ø± Ø¨Ú†Ù‡', img: 'https://via.placeholder.com/400x300?text=Ù¾ÙˆØ¯Ø± Ø¨Ú†Ù‡' },
        { name: 'ØºØ°Ø§ÛŒ Ú©Ù…Ú©ÛŒ Ù†ÙˆØ²Ø§Ø¯', img: 'https://via.placeholder.com/400x300?text=ØºØ°Ø§ÛŒ Ú©Ù…Ú©ÛŒ Ù†ÙˆØ²Ø§Ø¯' },
        { name: 'Ø¯Ø³ØªÙ…Ø§Ù„ Ø­ÙˆÙ„Ù‡â€ŒØ§ÛŒ Ú©ÙˆØ¯Ú©', img: 'https://via.placeholder.com/400x300?text=Ø¯Ø³ØªÙ…Ø§Ù„ Ø­ÙˆÙ„Ù‡â€ŒØ§ÛŒ Ú©ÙˆØ¯Ú©' }
      ] },
      { title: 'Ø¯Ø³ØªÙ…Ø§Ù„ Ùˆ Ø´ÙˆÛŒÙ†Ø¯Ù‡ Ø®Ø§Ù†Ú¯ÛŒ', items: [
        { name: 'Ø¯Ø³ØªÙ…Ø§Ù„ Ø¢Ø´Ù¾Ø²Ø®Ø§Ù†Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø¯Ø³ØªÙ…Ø§Ù„ Ø¢Ø´Ù¾Ø²Ø®Ø§Ù†Ù‡' },
        { name: 'Ø§Ø³Ú©Ø§Ú†', img: 'https://via.placeholder.com/400x300?text=Ø§Ø³Ú©Ø§Ú†' },
        { name: 'Ø³ÛŒÙ… Ø¸Ø±ÙØ´ÙˆÛŒÛŒ', img: 'https://via.placeholder.com/400x300?text=Ø³ÛŒÙ… Ø¸Ø±ÙØ´ÙˆÛŒÛŒ' },
        { name: 'Ø§Ø¨Ø± ØªÙ…ÛŒØ²Ú©Ù†Ù†Ø¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø§Ø¨Ø± ØªÙ…ÛŒØ²Ú©Ù†Ù†Ø¯Ù‡' },
        { name: 'Ø¬Ø±Ù…â€ŒÚ¯ÛŒØ±', img: 'https://via.placeholder.com/400x300?text=Ø¬Ø±Ù…â€ŒÚ¯ÛŒØ±' },
        { name: 'Ø´ÛŒØ´Ù‡ Ù¾Ø§Ú©â€ŒÚ©Ù†', img: 'https://via.placeholder.com/400x300?text=Ø´ÛŒØ´Ù‡ Ù¾Ø§Ú©â€ŒÚ©Ù†' },
        { name: 'Ø§Ø³Ù¾Ø±ÛŒ Ø¶Ø¯Ø¹ÙÙˆÙ†ÛŒâ€ŒÚ©Ù†Ù†Ø¯Ù‡', img: 'https://via.placeholder.com/400x300?text=Ø§Ø³Ù¾Ø±ÛŒ Ø¶Ø¯Ø¹ÙÙˆÙ†ÛŒâ€ŒÚ©Ù†Ù†Ø¯Ù‡' },
        { name: 'Ù…Ø§ÛŒØ¹ Ú©Ùâ€ŒØ´ÙˆÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù…Ø§ÛŒØ¹ Ú©Ùâ€ŒØ´ÙˆÛŒ' },
        { name: 'Ø³ÙÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ Ø³Ø·ÙˆØ­', img: 'https://via.placeholder.com/400x300?text=Ø³ÙÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ Ø³Ø·ÙˆØ­' },
        { name: 'Ø§Ø³Ù¾Ø±ÛŒ Ø®ÙˆØ´Ø¨ÙˆÚ©Ù†Ù†Ø¯Ù‡ Ù…Ø­ÛŒØ·', img: 'https://via.placeholder.com/400x300?text=Ø§Ø³Ù¾Ø±ÛŒ Ø®ÙˆØ´Ø¨ÙˆÚ©Ù†Ù†Ø¯Ù‡ Ù…Ø­ÛŒØ·' },
        { name: 'Ù…Ø§ÛŒØ¹ Ø¯Ø³ØªØ´ÙˆÛŒÛŒ ÙÙˆÙ…ÛŒ', img: 'https://via.placeholder.com/400x300?text=Ù…Ø§ÛŒØ¹ Ø¯Ø³ØªØ´ÙˆÛŒÛŒ ÙÙˆÙ…ÛŒ' }
      ] }
    ];

    function formatToman(n) { return Number(n).toLocaleString('fa-IR') + ' ØªÙˆÙ…Ø§Ù†'; }
    function toast(msg, time = 1800) {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.add('show');
      clearTimeout(t._hide);
      t._hide = setTimeout(() => t.classList.remove('show'), time);
    }
    function saveCart() {
      try {
        localStorage.setItem(LS_CART, JSON.stringify(cart));
      } catch (e) {
        toast('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯. Ø­Ø§ÙØ¸Ù‡ Ù…Ø±ÙˆØ±Ú¯Ø± Ù¾Ø± Ø§Ø³Øª.');
      }
    }
    function saveUser() {
      try {
        localStorage.setItem(LS_USER, JSON.stringify(user));
      } catch (e) {
        toast('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±.');
      }
    }
    function saveOrders() {
      try {
        localStorage.setItem(LS_ORDERS, JSON.stringify(orders));
      } catch (e) {
        toast('Ø®Ø·Ø§ Ø¯Ø± Ø°Ø®ÛŒØ±Ù‡ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§.');
      }
    }
    if (darkMode) { document.body.classList.add('dark-mode'); }
    function toggleDarkMode() {
      darkMode = !darkMode;
      document.body.classList.toggle('dark-mode');
      localStorage.setItem(LS_DARK_MODE, JSON.stringify(darkMode));
      toast(darkMode ? 'ØªÙ… ØªÛŒØ±Ù‡ ÙØ¹Ø§Ù„ Ø´Ø¯' : 'ØªÙ… Ø±ÙˆØ´Ù† ÙØ¹Ø§Ù„ Ø´Ø¯');
    }

    // Ø¨Ø±Ø§ÛŒ ØªØ³Øª: Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…Ø­ØµÙˆÙ„Ø§Øª Ù†Ù…ÙˆÙ†Ù‡
    if (cart.length === 0) {
      cart = [
        { id: 'Ù„Ø¨Ù†ÛŒØ§Øª_0', name: 'Ø´ÛŒØ± Ú©Ù…â€ŒÚ†Ø±Ø¨', price: 15000, quantity: 2, img: 'https://labaniyat.com/wp-content/uploads/2024/07/How-to-reduce-fat-in-milk-01.webp' },
        { id: 'Ù„Ø¨Ù†ÛŒØ§Øª_4', name: 'Ù…Ø§Ø³Øª Ø³Ø§Ø¯Ù‡', price: 20000, quantity: 1, img: 'https://via.placeholder.com/400x300?text=Ù…Ø§Ø³Øª Ø³Ø§Ø¯Ù‡' }
      ];
      saveCart();
    }

    function renderAddress() {
      const addressLabel = document.getElementById('addressLabel');
      addressLabel.textContent = user.address ? `ğŸ“ ${user.address}` : 'ğŸ“ Ø¢Ø¯Ø±Ø³';
      addressLabel.parentElement.classList.toggle('bold', !!user.address);
    }
    renderAddress();

    const categoriesList = document.getElementById('categoriesList');
    categories.forEach(c => {
      const d = document.createElement('div');
      d.className = 'cat-card';
      d.tabIndex = 0;
      d.innerHTML = `<div class="emoji">ğŸ›’</div><div style="font-weight:600">${c.title}</div>`;
      categoriesList.appendChild(d);
      d.addEventListener('click', () => showCategory(c));
    });

    const categoryPage = document.getElementById('categoryPage');
    const categoryTitle = document.getElementById('categoryTitle');
    const categoryProducts = document.getElementById('categoryProducts');
    function showCategory(cat, highlightItem = null) {
      showPage('categoryPage');
      categoryTitle.textContent = cat.title;
      categoryProducts.innerHTML = '';
      cat.items.forEach((item, idx) => {
        const p = typeof item === 'object' ? item : { name: item, img: 'https://via.placeholder.com/400x300?text=' + encodeURIComponent(item) };
        const price = Math.floor(Math.random() * 40000 + 5000);
        const card = document.createElement('div');
        card.className = 'prod-card';
        if (highlightItem && p.name.includes(highlightItem)) card.classList.add('highlight');
        card.innerHTML = `
          <img src="${p.img}" alt="${p.name}">
          <div class="title">${p.name}</div>
          <div class="price">${formatToman(price)}</div>
          <div class="actions">
            <button class="btn-outline" data-action="details" data-id="${cat.title + '_' + idx}">Ø¬Ø²Ø¦ÛŒØ§Øª</button>
            <button class="btn-primary" data-action="add" data-id="${cat.title + '_' + idx}">Ø§ÙØ²ÙˆØ¯Ù†</button>
          </div>`;
        categoryProducts.appendChild(card);
        card.querySelector('[data-action="add"]').addEventListener('click', () => { addToCart({ ...p, id: cat.title + '_' + idx, price }); });
        card.querySelector('[data-action="details"]').addEventListener('click', () => toast(`${p.name} â€” ${formatToman(price)}`));
      });
    }

    function getDiscountedProducts() {
      const allItems = [];
      categories.forEach(cat => {
        cat.items.forEach((item, idx) => {
          const name = typeof item === 'object' ? item.name : item;
          const img = typeof item === 'object' ? item.img : 'https://via.placeholder.com/400x300?text=' + encodeURIComponent(name);
          allItems.push({
            id: `${cat.title}_${idx}`,
            name,
            price: Math.floor(Math.random() * 40000 + 5000),
            discountPrice: Math.floor(Math.random() * 30000 + 3000),
            img
          });
        });
      });
      const uniqueItems = Array.from(new Set(allItems.map(item => item.id)))
        .map(id => allItems.find(item => item.id === id))
        .sort(() => Math.random() - 0.5)
        .slice(0, 5);
      return uniqueItems;
    }

    function renderDiscountItems() {
      const discountItems = document.getElementById('discountItems');
      discountItems.innerHTML = '';
      const discountedProducts = getDiscountedProducts();
      discountedProducts.forEach(p => {
        const card = document.createElement('div');
        card.className = 'prod-card';
        card.innerHTML = `
          <img src="${p.img}" alt="${p.name}">
          <div class="title">${p.name}</div>
          <div class="price" style="text-decoration:line-through;color:var(--sub)">${formatToman(p.price)}</div>
          <div class="price" style="color:var(--accent)">${formatToman(p.discountPrice)}</div>
          <div class="actions">
            <button class="btn-outline" data-action="details" data-id="${p.id}">Ø¬Ø²Ø¦ÛŒØ§Øª</button>
            <button class="btn-primary" data-action="add" data-id="${p.id}">Ø§ÙØ²ÙˆØ¯Ù†</button>
          </div>`;
        discountItems.appendChild(card);
        card.querySelector('[data-action="add"]').addEventListener('click', () => { addToCart({ ...p, price: p.discountPrice }); });
        card.querySelector('[data-action="details"]').addEventListener('click', () => { toast(`${p.name} â€” ${formatToman(p.discountPrice)} (ØªØ®ÙÛŒÙ)`); });
      });
    }

    function startDiscountTimer() {
      const timerEl = document.getElementById('discountTimer');
      function updateTimer() {
        const now = new Date();
        const endOfDay = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 23, 59, 59);
        const diff = endOfDay - now;
        if (diff <= 0) {
          timerEl.textContent = 'ØªØ®ÙÛŒÙØ§Øª Ù¾Ø§ÛŒØ§Ù† ÛŒØ§ÙØª';
          return;
        }
        const hours = Math.floor(diff / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        timerEl.textContent = `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
      }
      updateTimer();
      setInterval(updateTimer, 1000);
    }

    const cartItemsContainer = document.getElementById('cartItems');
    const cartTotalSpan = document.getElementById('cartTotal');
    const cartFooter = document.getElementById('cartFooter');
    const itemsCount = document.getElementById('itemsCount');
    const cartBadge = document.getElementById('cartBadge');
    function calcCartTotals() {
      let total = 0, count = 0;
      for (const it of cart) {
        const line = Number(it.price) * Number(it.quantity);
        total += line;
        count += Number(it.quantity);
      }
      return { total, count };
    }
    function updateCartUI() {
      cartItemsContainer.innerHTML = '';
      if (cart.length === 0) {
        cartItemsContainer.innerHTML = `
          <div style="color:var(--sub);text-align:center;padding:16px;">
            Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª
            <button class="small-btn" style="margin-top:8px" onclick="showPage('homePage')">Ø´Ø±ÙˆØ¹ Ø®Ø±ÛŒØ¯</button>
          </div>`;
        cartFooter.style.display = 'none';
        cartBadge.textContent = '';
        return;
      }
      cartFooter.style.display = 'flex';
      const { total, count } = calcCartTotals();
      cartTotalSpan.textContent = formatToman(total);
      itemsCount.textContent = `${count} Ø¢ÛŒØªÙ…`;
      cartBadge.textContent = count > 0 ? `(${count})` : '';
      cart.forEach((item, idx) => {
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
          <img src="${item.img}" alt="${item.name}">
          <div class="cart-item-info">
            <div class="cart-item-title">${item.name}</div>
            <div class="cart-item-price">${formatToman(item.price)} Ã— ${item.quantity} = ${formatToman(item.price * item.quantity)}</div>
            <div class="qty-controls" data-idx="${idx}">
              <button data-op="minus" title="Ú©Ù… Ú©Ø±Ø¯Ù†">âˆ’</button>
              <div style="min-width:36px;text-align:center;font-weight:700">${item.quantity}</div>
              <button data-op="plus" title="Ø§ÙØ²Ø§ÛŒØ´">+</button>
              <button style="margin-left:8px" class="remove-btn" data-op="remove" title="Ø­Ø°Ù">ğŸ—‘ï¸</button>
            </div>
          </div>`;
        cartItemsContainer.appendChild(div);
        setTimeout(() => div.classList.add('show'), 50 * idx);
      });
      saveCart();
    }
    cartItemsContainer.addEventListener('click', e => {
      const btn = e.target.closest('button');
      if (!btn) return;
      const parent = btn.closest('.qty-controls');
      if (!parent) return;
      const idx = Number(parent.dataset.idx);
      if (isNaN(idx) || !cart[idx]) return;
      const op = btn.dataset.op;
      const itemEl = parent.closest('.cart-item');
      if (op === 'plus') {
        cart[idx].quantity = Number(cart[idx].quantity) + 1;
        toast('ØªØ¹Ø¯Ø§Ø¯ Ø§ÙØ²Ø§ÛŒØ´ ÛŒØ§ÙØª');
      } else if (op === 'minus') {
        cart[idx].quantity = Number(cart[idx].quantity) - 1;
        if (cart[idx].quantity <= 0) {
          itemEl.style.opacity = '0';
          itemEl.style.transform = 'translateX(-20px)';
          setTimeout(() => {
            cart.splice(idx, 1);
            updateCartUI();
            toast('Ù…Ø­ØµÙˆÙ„ Ø§Ø² Ø³Ø¨Ø¯ Ø­Ø°Ù Ø´Ø¯');
          }, 300);
          return;
        } else {
          toast('ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ù‡Ø´ ÛŒØ§ÙØª');
        }
      } else if (op === 'remove') {
        itemEl.style.opacity = '0';
        itemEl.style.transform = 'translateX(-20px)';
        setTimeout(() => {
          cart.splice(idx, 1);
          updateCartUI();
          toast('Ù…Ø­ØµÙˆÙ„ Ø­Ø°Ù Ø´Ø¯');
        }, 300);
        return;
      }
      updateCartUI();
    });
    function addToCart(product) {
      const existing = cart.find(it => it.id === product.id);
      if (existing) {
        existing.quantity = Number(existing.quantity) + 1;
      } else {
        cart.push({ ...product, quantity: 1 });
      }
      toast(`"${product.name}" Ø¨Ù‡ Ø³Ø¨Ø¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`);
      updateCartUI();
    }

    const searchInput = document.getElementById('searchInput');
    const clearSearch = document.getElementById('clearSearch');
    let searchTimeout;
    searchInput.addEventListener('input', () => {
      clearTimeout(searchTimeout);
      searchTimeout = setTimeout(() => { applySearch(); }, 300);
    });
    clearSearch.addEventListener('click', () => {
      searchInput.value = '';
      toast('Ù†Ù…Ø§ÛŒØ´ Ù‡Ù…Ù‡Ù” Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§');
      showPage('homePage');
    });
    function applySearch() {
      const q = searchInput.value.trim();
      if (!q) {
        toast('Ù†Ù…Ø§ÛŒØ´ Ù‡Ù…Ù‡Ù” Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§');
        showPage('homePage');
        return;
      }
      let found = false;
      categories.forEach(cat => {
        const matchingItems = cat.items.filter(item => (typeof item === 'object' ? item.name : item).includes(q));
        if (matchingItems.length > 0) {
          showCategory(cat, q);
          found = true;
        }
      });
      if (found) {
        toast('Ù…Ø­ØµÙˆÙ„Ø§Øª Ù¾ÛŒØ¯Ø§ Ø´Ø¯');
      } else {
        toast('Ù‡ÛŒÚ† Ù…Ø­ØµÙˆÙ„ÛŒ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯');
        showPage('homePage');
      }
    }

    const acctName = document.getElementById('acctName');
    const acctPhone = document.getElementById('acctPhone');
    const walletAmount = document.getElementById('walletAmount');
    const ordersList = document.getElementById('ordersList');
    const editProfileBtn = document.getElementById('editProfileBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const topupBtn = document.getElementById('topupBtn');
    if (!user.name) user = { name: 'Ú©Ø§Ø±Ø¨Ø± Ù…Ù‡Ù…Ø§Ù†', phone: 'Û°Û¹Û°Û°Û°Û°Û°Û°Û°Û°', wallet: 100000, address: '', language: 'fa' };
    saveUser();
    function renderAccount() {
      acctName.textContent = user.name || 'Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±';
      acctPhone.textContent = user.phone || 'Û°Û¹Û°Û°Û°Û°Û°Û°Û°Û°';
      walletAmount.textContent = formatToman(Number(user.wallet || 0));
    }
    function renderOrders() {
      ordersList.innerHTML = '';
      if (orders.length === 0) {
        ordersList.innerHTML = '<div style="color:var(--sub)">Ù‡ÛŒÚ† Ø³ÙØ§Ø±Ø´ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</div>';
        return;
      }
      orders.forEach(o => {
        const d = document.createElement('div');
        d.className = 'order-item';
        const date = new Date(o.createdAt);
        const itemsSummary = o.items.map(it => `${it.name} Ã— ${it.quantity}`).join('ØŒ ');
        const paymentText = o.payment === 'wallet' ? 'Ú©ÛŒÙ Ù¾ÙˆÙ„' : o.payment === 'cod' ? 'Ù¾Ø±Ø¯Ø§Ø®Øª Ø¯Ø±Ø¨ Ù…Ù†Ø²Ù„' : 'Ù¾Ø±Ø¯Ø§Ø®Øª Ø¢Ù†Ù„Ø§ÛŒÙ†';
        d.innerHTML = `
          <div style="font-weight:700">#${o.id.split('_')[1]}</div>
          <div style="color:var(--sub);font-size:13px;margin-top:6px">${itemsSummary}</div>
          <div style="color:var(--sub);font-size:13px;margin-top:4px">Ø±ÙˆØ´ Ù¾Ø±Ø¯Ø§Ø®Øª: ${paymentText}</div>
          <div style="display:flex;justify-content:space-between;margin-top:8px">
            <div style="font-weight:700">${formatToman(o.total)}</div>
            <div style="color:var(--sub);font-size:13px">${date.toLocaleString('fa-IR')}</div>
          </div>`;
        ordersList.appendChild(d);
      });
